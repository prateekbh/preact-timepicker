!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("preact")):"function"==typeof define&&define.amd?define(["preact"],e):t.preactTimepicker=e(t.preact)}(this,function(t){return function(e){function n(){e.call(this),this.state={deg:this.getDegFromHours_((new Date).getHours()),step:"HOURS",currentTime:new Date},this.x_=0,this.y_=0,this.centerX_=0,this.centerY_=0,this.angles_=[];for(var t=0;t<360;t+=30)this.angles_.push(t)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.toRadians_=function(t){return t*(Math.PI/180)},n.prototype.toDegree_=function(t){return 180*t/Math.PI},n.prototype.handleDrag_=function(t){var e=180*Math.atan2(this.centerY_-((t.clientY||t.touches[0].clientY)-this.y_),this.centerX_-((t.clientX||t.touches[0].clientX)-this.x_))/Math.PI+180;switch(this.state.step){case"HOURS":(e=30*Math.round(e/30))%30==0&&this.setState({deg:e});break;case"MINUTES":(e=6*Math.round(e/6))%6==0&&this.setState({deg:e})}},n.prototype.reCalibrate_=function(){var t=this.svg.getBoundingClientRect(),e=t.y;this.x_=t.x,this.y_=e,this.centerX_=(this.props.size||400)/2,this.centerY_=(this.props.size||400)/2},n.prototype.handleEnd_=function(t){switch(this.state.step){case"HOURS":var e=Math.round(this.state.deg)/30+3;this.props.onHoursSelect&&this.props.onHoursSelect(e%12),this.setState({step:"MINUTES",deg:this.getDegFromMinutes_(this.state.currentTime.getMinutes())});break;case"MINUTES":var n=Math.round(this.state.deg)/30+3;this.props.onMinutesSelect&&this.props.onMinutesSelect(5*n%60)}},n.prototype.getDegFromHours_=function(t){return 30*(t-3)},n.prototype.getDegFromMinutes_=function(t){return 6*(t-15)},n.prototype.mouseUp_=function(){this.setState({mouseDown:!1}),this.handleEnd_()},n.prototype.mouseDown_=function(){this.reCalibrate_(),this.setState({mouseDown:!0})},n.prototype.mouseMove_=function(t){this.state.mouseDown&&this.handleDrag_(t)},n.prototype.showHours=function(){this.setState({step:"HOURS"})},n.prototype.showMinutes=function(){this.setState({step:"MINUTES"})},n.prototype.render=function(e){var n=this;return t.h("svg",{class:"dial minues",width:this.props.size||"400",height:this.props.size||"400",viewBox:"0 0 400 400",onTouchStart:this.reCalibrate_.bind(this),onTouchMove:this.handleDrag_.bind(this),onTouchEnd:this.handleEnd_.bind(this),onMouseDown:this.mouseDown_.bind(this),onMouseMove:this.mouseMove_.bind(this),onMouseUp:this.mouseUp_.bind(this),ref:function(t){return n.svg=t}},t.h("style",null,"\n          :root{\n            fill: transparent;\n            stroke: #000;\n            user-select: none;\n          }\n          text {\n            fill: #000;\n            font-family: helvetica;\n            alignment-baseline: central;\n            text-anchor: middle;\n          }\n          .arm {\n            fill: #0091EA;\n            transform-origin: center center;\n            transition-property: transform;\n            transition-duration: 400ms;\n          }\n          .minutes, .hours {\n            transition-property: opacity, transform;\n            transition-duration: 300ms;\n            transform-origin: center;\n          }\n          .display.HOURS .minutes{\n            opacity: 0;\n            transform: scale(0.7);\n          }\n          .display.MINUTES .hours{\n            opacity: 0;\n            transform: scale(0.7);\n          }\n        "),t.h("circle",{cx:"200",cy:"200",r:"190"}),t.h("g",{class:"display "+this.state.step},t.h("g",{class:"arm",style:"transform: rotate("+this.state.deg+"deg)"},t.h("rect",{width:"145",height:"2",x:"199",y:"199","stroke-width":"0"}),t.h("circle",{cx:"200",cy:"200",r:"5","stroke-width":"0"}),t.h("circle",{cx:"360",cy:"200",r:"20","stroke-width":"0"})),t.h("g",{class:"hours"},this.angles_.map(function(e,s){return t.h("text",{x:Math.round(160*Math.cos(n.toRadians_(e)))+200,y:Math.round(160*Math.sin(n.toRadians_(e)))+200,class:"digit"},(s+3)%12||12)})),t.h("g",{class:"minutes"},this.angles_.map(function(e,s){return t.h("text",{x:Math.round(160*Math.cos(n.toRadians_(e)))+200,y:Math.round(160*Math.sin(n.toRadians_(e)))+200,class:"digit"},5*((s+3)%12||12))}))))},n}(t.Component)});
//# sourceMappingURL=index.umd.js.map
