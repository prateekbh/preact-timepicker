import{h as t,Component as e}from"preact";export default function(e){function s(){e.call(this),this.state={deg:this.getDegFromHours_((new Date).getHours()),step:"HOURS",currentTime:new Date},this.x_=0,this.y_=0,this.centerX_=0,this.centerY_=0,this.angles_=[];for(var t=0;t<360;t+=30)this.angles_.push(t)}return e&&(s.__proto__=e),(s.prototype=Object.create(e&&e.prototype)).constructor=s,s.prototype.toRadians_=function(t){return t*(Math.PI/180)},s.prototype.toDegree_=function(t){return 180*t/Math.PI},s.prototype.handleDrag_=function(t){var e=180*Math.atan2(this.centerY_-((t.clientY||t.touches[0].clientY)-this.y_),this.centerX_-((t.clientX||t.touches[0].clientX)-this.x_))/Math.PI+180;switch(this.state.step){case"HOURS":(e=30*Math.round(e/30))%30==0&&this.setState({deg:e});break;case"MINUTES":(e=6*Math.round(e/6))%6==0&&this.setState({deg:e})}},s.prototype.reCalibrate_=function(){var t=this.svg.getBoundingClientRect(),e=t.y;this.x_=t.x,this.y_=e,this.centerX_=(this.props.size||400)/2,this.centerY_=(this.props.size||400)/2},s.prototype.handleEnd_=function(t){switch(this.state.step){case"HOURS":var e=Math.round(this.state.deg)/30+3;this.props.onHoursSelect&&this.props.onHoursSelect(e%12),this.setState({step:"MINUTES",deg:this.getDegFromMinutes_(this.state.currentTime.getMinutes())});break;case"MINUTES":var s=Math.round(this.state.deg)/30+3;this.props.onMinutesSelect&&this.props.onMinutesSelect(5*s%60)}},s.prototype.getDegFromHours_=function(t){return 30*(t-3)},s.prototype.getDegFromMinutes_=function(t){return 6*(t-15)},s.prototype.mouseUp_=function(){this.setState({mouseDown:!1}),this.handleEnd_()},s.prototype.mouseDown_=function(){this.reCalibrate_(),this.setState({mouseDown:!0})},s.prototype.mouseMove_=function(t){this.state.mouseDown&&this.handleDrag_(t)},s.prototype.showHours=function(){this.setState({step:"HOURS"})},s.prototype.showMinutes=function(){this.setState({step:"MINUTES"})},s.prototype.render=function(e){var s=this;return t("svg",{class:"dial minues",width:this.props.size||"400",height:this.props.size||"400",viewBox:"0 0 400 400",onTouchStart:this.reCalibrate_.bind(this),onTouchMove:this.handleDrag_.bind(this),onTouchEnd:this.handleEnd_.bind(this),onMouseDown:this.mouseDown_.bind(this),onMouseMove:this.mouseMove_.bind(this),onMouseUp:this.mouseUp_.bind(this),ref:function(t){return s.svg=t}},t("style",null,"\n          :root{\n            fill: transparent;\n            stroke: #000;\n            user-select: none;\n          }\n          text {\n            fill: #000;\n            font-family: helvetica;\n            alignment-baseline: central;\n            text-anchor: middle;\n          }\n          .arm {\n            fill: #0091EA;\n            transform-origin: center center;\n            transition-property: transform;\n            transition-duration: 400ms;\n          }\n          .minutes, .hours {\n            transition-property: opacity, transform;\n            transition-duration: 300ms;\n            transform-origin: center;\n          }\n          .display.HOURS .minutes{\n            opacity: 0;\n            transform: scale(0.7);\n          }\n          .display.MINUTES .hours{\n            opacity: 0;\n            transform: scale(0.7);\n          }\n        "),t("circle",{cx:"200",cy:"200",r:"190"}),t("g",{class:"display "+this.state.step},t("g",{class:"arm",style:"transform: rotate("+this.state.deg+"deg)"},t("rect",{width:"145",height:"2",x:"199",y:"199","stroke-width":"0"}),t("circle",{cx:"200",cy:"200",r:"5","stroke-width":"0"}),t("circle",{cx:"360",cy:"200",r:"20","stroke-width":"0"})),t("g",{class:"hours"},this.angles_.map(function(e,n){return t("text",{x:Math.round(160*Math.cos(s.toRadians_(e)))+200,y:Math.round(160*Math.sin(s.toRadians_(e)))+200,class:"digit"},(n+3)%12||12)})),t("g",{class:"minutes"},this.angles_.map(function(e,n){return t("text",{x:Math.round(160*Math.cos(s.toRadians_(e)))+200,y:Math.round(160*Math.sin(s.toRadians_(e)))+200,class:"digit"},5*((n+3)%12||12))}))))},s}(e);
//# sourceMappingURL=index.m.js.map
